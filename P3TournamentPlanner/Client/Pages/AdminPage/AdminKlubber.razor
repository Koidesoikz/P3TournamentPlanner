@using P3TournamentPlanner.Shared;
@using System;
@using System.Collections.Generic;
@using Microsoft.AspNetCore.Authorization;
@inject HttpClient Http
@inject IHttpClientFactory ClientFactory
<h3>Admin</h3>
<button>Lav ny klub</button>
<!--<div class="Containers" id="information">
    <h3>Username</h3>
    <h3>Password</h3>
    <h3>Email</h3>
</div>-->

<div class="mainTable">
    <table class="table-style" style=" border-collapse: separate; border-spacing: 0 10px; width: 90%; font-size: larger;">
        <thead>
            <tr>
                <th> Klubnavn </th>
                <th> Træner </th>
                <th> Email </th>
                <th> Antal spillere </th>
            </tr>
        </thead>
        <tbody>
            @foreach (Club club in clubs)
            {
                <tr>
                    <td>@club.name</td>
                </tr>
            }
        </tbody>
    </table>
</div>

@code {
    public List<Club> clubs = new List<Club>();

    protected override async Task OnParametersSetAsync()
    {
        HttpClient client = ClientFactory.CreateClient("ServerAPI.NoAuthenticationClient");
        client.BaseAddress = new Uri("https://localhost:44341/");

        Console.WriteLine("Get Send");
        clubs = await client.GetFromJsonAsync<List<Club>>("api/Klub");
        Console.WriteLine("På den anden side");
        Console.WriteLine(clubs);
    }
}